var wc_appointments_timezone_picker={};jQuery(function(a){"use strict";var _=wca_get_cookie("appointments_time_zone");(wc_appointments_timezone_picker={init:function(){a("body").on("change","#wc_appointments_field_timezone",this.select_timezone),a("a.selected-timezone").on("click",this.show_timezone_select),a('select[name="wc_appointments_field_timezone"]').on("select2:close",this.hide_timezone_select),a(".wc-appointments-appointment-form").each(function(){var e=a(this).closest("form"),t=e.find(".picker:eq(0)"),n=e.find(".wc_appointments_field_timezone"),i=n.find("select"),o=moment.tz.guess()||wc_appointment_form_params.server_timezone,s=i.val(),c=t.attr("data-timezone_conversion");i.select2(),c&&null===_&&o!==s&&(wca_set_cookie("appointments_time_zone",o,30),n.find(".selected-timezone").text(o.replace("_"," ")),i.val(o),e.triggerHandler("timezone-selected"))})},show_timezone_select:function(e){var t=a(this).closest(".wc_appointments_field_timezone");a(e.target).hasClass("selected-timezone")?(t.find("select, .select2").css("display","block"),t.find("select").select2("open")):t.find("select, .select2").css("display","none")},hide_timezone_select:function(e){a(this).closest(".wc_appointments_field_timezone").find("select, .select2").css("display","none"),e.preventDefault()},select_timezone:function(){var e=a(this).val(),n=a(this).closest("form"),t={"wc-ajax":"wc_appointments_set_timezone_cookie",timezone:e,security:wc_appointment_form_params.nonce_set_timezone_cookie};n.find(".wc-appointments-appointment-form-button").prop("disabled",!0),a.ajax({context:this,url:wc_appointments_timezone_picker_args.ajax_url,method:"POST",data:t}).done(function(t){a(".wc-appointments-appointment-form").each(function(){var e=a(this).closest("form").find(".wc_appointments_field_timezone");e.find(".selected-timezone").text(t.replace("_"," ")),e.find("select, .select2").css("display","none")}),n.triggerHandler("timezone-selected")})}}).init()});